<template>

	<!-- 12 Column Content Area -->
	<div class="o-full-page">

		<div class="o-conversation-body col-sm-8 col-sm-offset-2">

			<!-- steps -->
			<div class="row o-conversation-body__steps">
				<div class="c-to-center">
					<ul class="o-wizard clearfix">
						<span class="o-wizard__line o-wizard__line--two"></span>
						<li class="o-wizard__step o-wizard__step--two">
							<div class="o-step-block">
								<div class="o-step-block__step-inner">
									<span class="o-step-block__active-step"></span>
								</div>
							</div>
							<div class="o-step-block__description u-text-style__size--small u-text-style__align--center">Define Properties</div>
						</li>
						<li class="o-wizard__step o-wizard__step--two">
							<div class="o-step-block is-active">
								<div class="o-step-block__step-inner">
									<span class="o-step-block__active-step"></span>
								</div>
							</div>
							<div class="o-step-block__description o-step-block__description--active u-text-style__size--small u-text-style__align--center">Define Questions</div>
						</li>
					</ul>
				</div>
			</div>

			<!-- header -->
			<div class="o-conversation-body__header">
				<div class="c-to-center">
					<h1 class="o-text__header--xlarge u-text-style--none u-text-style__space--none u-text-style__space--below u-text-style__align--center">Please define your questions below.</h1>
					<div class="u-text-style__size--large u-text-style__align--center" show.bind="createStore.successMessage">${createStore.successMessage}</div>
				</div>
			</div>

			<!-- content -->
			<div class="row o-conversation-body__content o-conversation-body__content--with-steps">
				<div class="o-inner-shadow--from-bottom"></div>

				<!-- UTILITY -->
				<div class="o-conversation-utility col-sm-12">
					<!-- SHOW - TOTAL -->
					<div class="o-conversation-utility__total-wrap o-conversation-utility__total-wrap--left pull-left">
						<div class="c-to-center c-to-center--vertical-only">
							<div class="u-text-style__size--large u-text-style__align--left">Total&nbsp;Score:&nbsp;${totalScore}</div>



						</div>
					</div>

					<!-- BUTTON - REMOVE -->
					<!--
     <div class="o-conversation-utility__button-wrap o-button pull-right" class.bind="isInDeleteState ? 'is-selected' : ''">
     <button class=" o-button__navigate o-button__navigate--primary-colour" click.delegate="isInDeleteState = !isInDeleteState">
     <span class="o-button o-button__navigate o-button__navigate-inner o-button__navigate-inner--thin">
     <span class="o-icon-container o-icon-container--small-button o-button-navigate-icon--remove"></span>
     </span>
     </button>
     </div>
     -->

				</div>

				<div class="o-conversation-search-list__parent-wrapper">

					<div class="o-conversation-search-list__child-wrapper o-accordion">
						<ul class="">
							<li class="o-accordion__item" repeat.for="section of createStore.formattedSections">
								<div class="o-accordion-header o-hover clearfix" click.delegate="toggleExpandSection(section, $index)">
									<div class="o-accordion-header__title u-text-style--uppercase col-sm-10">${section.name}</div>
									<div class="o-accordion-header__action col-sm-2">
										<span class="o-accordion-action o-accordion-action--navigate pull-right" class.bind="section.expanded ? 'is-expanded' : 'is-collapsed'"></span>
									</div>
								</div>
								<div class="o-accordion-body" class.bind="section.expanded ? 'is-expanded' : 'is-collapsed'" id="section_${$index}">
									<ul class="">
										<li class="o-accordion-body__inner" repeat.for="question of section.questions">
											<form class="" validate.bind="validation">
												<div class="o-accordion-body__section clearfix">
													<!--												<div class="o-accordion-body__section-split"></div>-->
													<div class="o-accordion-body__section-content col-sm-12">
														<div show.bind="!question.isInEditState">
															<div class="col-sm-10 u-text-style__size--medium u-text-style__align--left u-text-style__color--secondary">${question.description}</div>

															<div class="o-accordion-section-action col-sm-2" class.bind="createStore.isInEditState ? 'fadedContent' : ''">
																<span class="o-accordion-action o-accordion-action--small-spaced o-accordion-action--remove pull-right" click.delegate="removeQuestion(section.name, $index)"></span>
																<span class="o-accordion-action o-accordion-action--small-spaced o-accordion-action--edit pull-right" click.delegate="toggleEditQuestion(question, 'txtQuestion_' + section.name + '_' + $index)"></span>
															</div>

														</div>
														<div show.bind="question.isInEditState">
															<div class="form-group clearfix o-form-field has-warning">
																<span class="o-form-field__input-border-line"></span>
																<input type="text" placeholder="Please enter your question here" class="o-form-field__input o-text__input" value.bind="question.description" id="${'txtQuestion_' + section.name + '_' + $index}" keyup.trigger="keyPressed($event, section)" />
																<span class="o-form-field__input-border-line"></span>
																<div class="c-validation c-validation--pull-top u-text-style__size--medium">
																	<p show.bind="createStore.isQuestionCorrect">${createStore.validationReason}</p>
																</div>
															</div>
														</div>
													</div>
												</div>
												<div class="o-accordion-body__section ${question.isInEditState ? '' : 'o-accordion-body__section--hidden'} o-accordion-body__section--second clearfix">
													<div class="o-accordion-body__section-content col-sm-offset-1 col-sm-5">
														<div class="u-text-style--uppercase o-accordion-body__section-content-title u-text-style__align--center">Yes</div>
														<div class="form-group clearfix o-form-field has-warning">
															<input type="text" placeholder="Enter score when answer YES" class="o-form-field__input o-form-field__input--digits o-text__input u-text-style__align--center" ref="yesWeight" keyup.trigger="keyPressed($event, section)" value.bind="question.yesWeight" min="0" step="1"/>
															<div class="c-validation c-validation--center u-text-style__size--medium">
																<p show.bind="createStore.isYesWeightCorrect">${createStore.validationReason}</p>
																<p show.bind="createStore.isYesWeightNumeric">${createStore.validationReason}</p>
																<p show.bind="createStore.isWeightsCorrect">${createStore.validationReason}</p>
																<p show.bind="createStore.isNegativeYesWeight">${createStore.validationReason}</p>
																<p show.bind="createStore.isYesWeightWholeNumber">${createStore.validationReason}</p>
															</div>
														</div>
													</div>
													<div class="o-accordion-body__section-content col-sm-5">
														<div class="u-text-style--uppercase o-accordion-body__section-content-title u-text-style__align--center">No</div>
														<div class="form-group clearfix o-form-field has-warning">
															<input type="text" placeholder="Enter score when answer NO" class="o-form-field__input o-form-field__input--digits o-text__input u-text-style__align--center" keyup.trigger="keyPressed($event, section)" value.bind="question.noWeight" min="0" step="1"/>
															<div class="c-validation c-validation--center u-text-style__size--medium">
																<p show.bind="createStore.isNoWeightCorrect">${createStore.validationReason}</p>
																<p show.bind="createStore.isNoWeightNumeric">${createStore.validationReason}</p>
																<p show.bind="createStore.isWeightsCorrect">${createStore.validationReason}</p>
																<p show.bind="createStore.isNegativeNoWeight">${createStore.validationReason}</p>
																<p show.bind="createStore.isNoWeightWholeNumber">${createStore.validationReason}</p>
															</div>
														</div>
													</div>
												</div>
											</form>
											<div class="o-accordion-body__section clearfix" show.bind="question.isInEditState">
												<div class="o-accordion-body__section-content col-sm-offset-10 col-sm-2">
													<span class="o-accordion-action o-accordion-action--small-spaced o-accordion-action--remove pull-right" click.delegate="removeQuestion(section.name, $index)"></span>
													<span class="o-accordion-action o-accordion-action--small-spaced o-accordion-action--accept pull-right" class.bind="!question.yesWeight || !question.noWeight || !question.description ? 'fadedContent' : ''" click.delegate="toggleEditQuestion(question, 'txtQuestion_' + $index)"></span>
												</div>
											</div>
										</li>

										<div class="o-accordion-header o-accordion-header--footer clearfix">
											<div class="o-accordion-footer clearfix o-hover" click.delegate="addQuestion(section, $index)" class.bind="createStore.isInEditState ? 'fadedContent' : ''">
												<div class="u-text-style__align--left col-sm-4 col-sm-offset-3">Add question</div>
												<div class="col-sm-2">
													<span class="o-accordion-action o-accordion-action--add pull-right"></span>
												</div>
											</div>
										</div>

									</ul>
								</div>
							</li>
						</ul>
					</div>

				</div>

			</div>

			<!-- footer -->
			<div class="row o-conversation-body__footer">


				<div class="c-to-center">
					<div class="col-sm-12">
						<div class="u-text-style__align--center">
							<button class="o-button__glass-rectangle o-button__glass-rectangle--secondary-color o-button__glass-rectangle--respond o-text__button" click.delegate="back()">Back</button>
							<button class="o-button__glass-rectangle o-button__glass-rectangle--secondary-color o-button__glass-rectangle--respond o-text__button" click.delegate="cancel()">Cancel</button>
							<button class="o-button__glass-rectangle o-button__glass-rectangle--secondary-color o-button__glass-rectangle--respond o-text__button" click.delegate="publish()" class.bind="createStore.isInEditState || disablePublish ? 'fadedContent' : ''">Publish</button>

						</div>
						<div class="form-group clearfix o-form-field has-warning">
							<div class="c-validation c-validation--center c-validation--bottom u-text-style__size--medium">
								<p show.bind="createStore.isSectionCorrect">${createStore.sectionValidationReason}</p>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>

	</div>

</template>